# 分布式架构规划

公司对于分布式架构的规划是建立在业务体系架构的需求之上的，也是公司应用系统架构演化的必然结果。公司的总体发展目标是建成全球的人民币相关产品的交易主平台和定价中心，为了实现这一宏伟目标，支撑业务的蓬勃发展，我们对于业务体系的功能属性及质量属性进行了分析，如下图所示：

![](/assets/req.jpg)

对于这些功能及质量属性的要求，现有系统面临着如下挑战：

1. 如何提高业务响应能力，更好地支持交易中心的业务发展，适应人民币国际化发展的需要；
2. 业务的快速发展（例如撮合、人民币国际化）对系统的安全性、性能、可靠性提出了挑战，如何在性能、可靠性、可扩展性、系统物理部署能力（包括多中心交易）等多个技术方面到达国际先进水平；
3. 原有系统层次划分不够清晰，无法满足交易中心作为“人民币相关产品交易主平台和定价中心”的地位所需要的基础平台。

为了迎接这些挑战，我们启动了新一代交易系统的建设，同时也对系统架构从原来的“筒状”的集中式架构逐步向分布式架构转型，如下图所示：

![](/assets/import.png)

层次划分基于服务化的思想，将业务与技术分离，形成以统一门户客户端、统一用户接入平台、数据交换平台、后台服务平台四层架构为基础的面向服务的分布式体系架构。分布式的架构体系需要有服务治理，服务管控的支持，我们层次架构的基础上规划设计了元数据管理平台和统一监控平台。如下图：

![](/assets/import1.png)

1. 统一门户客户端：为了优化用户体验，提升开发效率，我们打造了以Chromium内核为核心的混合客户端架构，用以支撑Web、手持设备、CS客户端的开发。
2. 用户统一接入平台：是整个分布架构的接入层，它提供了基于TCP、HTTP、MQ等方式的统一接入，提供了负载均衡、流量控制、安全控制、协议转换、路由转发等功能。
3. 数据交换平台：为后台服务提供基础设施，包括服务配置、服务发现、基于消息、文件、数据库的数据交换；它通过提供API为后台服务提供了应用间数据交换、保证了消息的可靠性、分布式事务的一致性。
4. 后台服务层：根据业务领域及应用的特点把相关的领域划分为后台服务，分而治之。

下面我们就如何支撑交易中心的分布式体系架构，从统一接入平台、数据交换平台、后台服务分别进行讨论。



